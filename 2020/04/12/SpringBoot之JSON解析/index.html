<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="SpringBoot之JSON解析（四）"><meta name="keywords" content="spring boot"><meta name="author" content="Connor"><meta name="copyright" content="Connor"><title>SpringBoot之JSON解析（四） | ConnorZJ's Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="ConnorZJ's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring-boot-之-JSON-解析（四）"><span class="toc-number">1.</span> <span class="toc-text">spring boot 之 JSON 解析（四）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON有什么用"><span class="toc-number">1.1.</span> <span class="toc-text">JSON有什么用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么在项目中使用"><span class="toc-number">1.2.</span> <span class="toc-text">怎么在项目中使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Jackson的使用"><span class="toc-number">1.2.1.</span> <span class="toc-text">Jackson的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义格式"><span class="toc-number">1.2.2.</span> <span class="toc-text">自定义格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#深入浅出"><span class="toc-number">1.2.3.</span> <span class="toc-text">深入浅出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gson的使用"><span class="toc-number">1.2.4.</span> <span class="toc-text">Gson的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fastjson的使用"><span class="toc-number">1.2.5.</span> <span class="toc-text">fastjson的使用</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://qiniuyun.zijie.fun/avatar.png"></div><div class="author-info__name text-center">Connor</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/ConnorZJ" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">12</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">1</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">1</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://qiniuyun.zijie.fun/64535234_p0.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">ConnorZJ's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">SpringBoot之JSON解析（四）</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-12</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/spring-boot/">spring boot</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="spring-boot-之-JSON-解析（四）"><a href="#spring-boot-之-JSON-解析（四）" class="headerlink" title="spring boot 之 JSON 解析（四）"></a>spring boot 之 JSON 解析（四）</h1><h2 id="JSON有什么用"><a href="#JSON有什么用" class="headerlink" title="JSON有什么用"></a>JSON有什么用</h2><p>JSON (JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript (w3c制定的js规范)的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。简洁和清晰的层次结构使得 JSON 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。</p>
<p>说到底，JSON就是用来进行数据交互的那个<strong>数据</strong>。在前后端分离的情况下，前端负责数据展示，后台负责处理业务逻辑，这之间数据交互时，就可以用到JSON了。</p>
<h2 id="怎么在项目中使用"><a href="#怎么在项目中使用" class="headerlink" title="怎么在项目中使用"></a>怎么在项目中使用</h2><p>在spring4以前，可以在controller的方法上加上注解@ResponseBody，这个注解表明该对象是需要序列化成JSON字符串返回的，而也可以在参数前加上注解@RequestBody，表示这个入参接收到的是JSON字符串，需要被反序列化成对象使用。</p>
<p>在spring4以后，可以用上@RestController注解在controller类上，可以实现统一配置，这样就不需要在每一个方法前加上注解了。</p>
<p>不管是对象序列化成JSON字符串，还是JSON字符串反序列化成对象，底层这种灵活的消息转换机制就是通过一个类：HttpMessageConverter来实现的。我们在springboot项目中，可以找到一个类<em>HttpMessageConvertersAutoConfiguration</em>,在里面可以看到：</p>
<ul>
<li><p>有个条件注解是存在HttpMessageConverter类才生效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;HttpMessageConverter<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>还有个注解表示在项目中可以自动配置三种JSON工具，分别是Jackson、Gson和Json-B</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;JacksonHttpMessageConvertersConfiguration<span class="class">.<span class="keyword">class</span>, <span class="title">GsonHttpMessageConvertersConfiguration</span>.<span class="title">class</span>, <span class="title">JsonbHttpMessageConvertersConfiguration</span>.<span class="title">class</span>&#125;)</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>接下来看看怎么使用</p>
<h3 id="Jackson的使用"><a href="#Jackson的使用" class="headerlink" title="Jackson的使用"></a>Jackson的使用</h3><p>创建一个springboot项目，依赖只勾选Web依赖就可以了，在Maven依赖中可以看到，web依赖了json，json默认又依赖了jackson，所以，我们在Controller中添加一个@RestController注解，就能够用到Jackson了。</p>
<p><img src="http://qiniuyun.zijie.fun/20200412130148.png" alt=""></p>
<p>下面创建一个bean类对象，一个controller，在controller中创建若干个Person对象并返回</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/list"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">listAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;Person&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Person p = <span class="keyword">new</span> Person();</span><br><span class="line">            p.setName(<span class="string">"张"</span>+i);</span><br><span class="line">            p.setAddress(<span class="string">"地址"</span>+i);</span><br><span class="line">            p.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">            list.add(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后启动项目，输入访问地址，可以看到效果图</p>
<p><img src="http://qiniuyun.zijie.fun/20200412130609.png" alt=""></p>
<h3 id="自定义格式"><a href="#自定义格式" class="headerlink" title="自定义格式"></a>自定义格式</h3><p>emmmmmmm，效果是出来了，但是这个日期格式有点看得不顺眼**</p>
<p>既然是Jackson是一个JSON，那肯定可以配置的呀~</p>
<p>首先在Person对象的birthday属性上，加上这么一行注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd"</span>)</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>表示要将birthday以特定的格式年-月-日输出，接下来重启项目看看效果</p>
<p><img src="http://qiniuyun.zijie.fun/20200412131033.png" alt=""></p>
<p>这样就看得顺眼多了！</p>
<p><strong>但转头一想，如果项目里面有很多的这种日期属性的对象，那么我要在每一个这样的属性上都加上这一行注解吗？</strong></p>
<h3 id="深入浅出"><a href="#深入浅出" class="headerlink" title="深入浅出"></a>深入浅出</h3><p>其实不用，我们可以实现统一化配置</p>
<p>首先我们来看一看Jackson是怎么默认实现的，找到类<strong>JacksonHttpMessageConvertersConfiguration</strong>，看到其中有一个方法是：</p>
<p><img src="http://qiniuyun.zijie.fun/20200412131941.png" alt=""></p>
<p>这个表示，如果MappingJackson2HttpMessageConverter类没有提供这样一个bean的话，springboot就会使用这个默认的bean来配置，那我如果自己提供一个MappingJackson2HttpMessageConverter的bean会怎么样呢？</p>
<p><strong>想了就做</strong>，首先在路径下创建一个config包，在里面创建JsonMvcConfig类，类的内容如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonMvcConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">MappingJackson2HttpMessageConverter <span class="title">mappingJackson2HttpMessageConverter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MappingJackson2HttpMessageConverter converter = <span class="keyword">new</span> MappingJackson2HttpMessageConverter();</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setDateFormat(<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy/MM/dd"</span>));</span><br><span class="line">        converter.setObjectMapper(om);</span><br><span class="line">        <span class="keyword">return</span> converter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，注释掉Person类属性里的@JsonFormat注解，重启项目，就能看到效果了</p>
<p><img src="http://qiniuyun.zijie.fun/20200412132733.png" alt=""></p>
<p>到现在我们也能看到，重新提供了一个MappingJackson2HttpMessageConverter的bean，能够是springboot使用我们自定义的方法，而其中真正生效的，其实是ObjectMapper类。</p>
<p>我们在看看另一个类：<strong>JacksonAutoConfiguration</strong>，在其中能看到</p>
<p><img src="http://qiniuyun.zijie.fun/20200412133248.png" alt=""></p>
<p>这个和上一个类似，也是缺省使用了<strong>ObjectMapper</strong>的bean，那如果我不提供<strong>MappingJackson2HttpMessageConverter</strong>，而使用<strong>MappingJackson2HttpMessageConverter</strong>行得通吗？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonMvcConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() &#123;</span></span><br><span class="line"><span class="comment">//        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();</span></span><br><span class="line"><span class="comment">//        ObjectMapper om = new ObjectMapper();</span></span><br><span class="line"><span class="comment">//        om.setDateFormat(new SimpleDateFormat("yyyy/MM/dd"));</span></span><br><span class="line"><span class="comment">//        converter.setObjectMapper(om);</span></span><br><span class="line"><span class="comment">//        return converter;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">ObjectMapper <span class="title">objectMapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setDateFormat(<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>));</span><br><span class="line">        <span class="keyword">return</span> om;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把上面的代码改一改，现在只提供<strong>ObjectMapper</strong>，试一试能不能生效</p>
<p><img src="http://qiniuyun.zijie.fun/20200412133719.png" alt=""></p>
<p><strong>答案是可以的！！</strong></p>
<p>至此，就可以比较了解了，JSON在springboot中是如何生效的，以及自定义配置JSON的格式。</p>
<h3 id="Gson的使用"><a href="#Gson的使用" class="headerlink" title="Gson的使用"></a>Gson的使用</h3><p>上面介绍了如何使用Jackson，而springboot中提供了除Jackson外，还有Gson的配置。</p>
<p>要使用Gson，首先修改一下pom文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将jackson的依赖排除掉，并引入gson依赖，可以看到gson没有版本号，这时因为springboot-start已经集成了gson</p>
<p>通过以上配置，则在项目中classpath里提供了默认的Gson的bean，所以就能直接用了，打印结果如下</p>
<p><img src="http://qiniuyun.zijie.fun/20200412234500.png" alt=""></p>
<p>要自定义格式的话，也如同Jackson一样，提供一个自定义的<strong>GsonHttpMessageConverter</strong>的bean，详细配置如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonMvcConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">GsonHttpMessageConverter <span class="title">gsonHttpMessageConverter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        GsonHttpMessageConverter gsonHttpMessageConverter = <span class="keyword">new</span> GsonHttpMessageConverter();</span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson().newBuilder().setDateFormat(<span class="string">"yyyy-MM-dd"</span>).create();</span><br><span class="line">        gsonHttpMessageConverter.setGson(gson);</span><br><span class="line">        <span class="keyword">return</span> gsonHttpMessageConverter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来测试一下效果</p>
<p><img src="http://qiniuyun.zijie.fun/20200412235257.png" alt=""></p>
<p>这样就生效了，所以使用Gson也是非常方便的！</p>
<h3 id="fastjson的使用"><a href="#fastjson的使用" class="headerlink" title="fastjson的使用"></a>fastjson的使用</h3><p>为什么要使用fastjson呢？</p>
<p>看名字其实就看得出来，那就是-fast(快)，而且这个库还是<strong>国产</strong>的，当然要支持支持啦~</p>
<p>话不多说直接开撸，首先在pom中引入相关依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.68<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>像前两种使用方式一样，在配置中提供一个<strong>FastJsonHttpMessageConverter</strong>的bean，然后类似的配置一配！下面是配置和效果图</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonMvcConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">FastJsonHttpMessageConverter <span class="title">fastJsonHttpMessageConverter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FastJsonHttpMessageConverter fastJsonHttpMessageConverter = <span class="keyword">new</span> FastJsonHttpMessageConverter();</span><br><span class="line">        FastJsonConfig config = <span class="keyword">new</span> FastJsonConfig();</span><br><span class="line">        config.setDateFormat(<span class="string">"yyyy&amp;MM&amp;dd"</span>);</span><br><span class="line">        fastJsonHttpMessageConverter.setFastJsonConfig(config);</span><br><span class="line">        <span class="keyword">return</span> fastJsonHttpMessageConverter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://qiniuyun.zijie.fun/20200413000345.png" alt=""></p>
<p>发现这个是乱码，于是在application.properties中加上这么个两句就可以了</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.http.encoding.charset</span>=<span class="string">utf-8</span></span><br><span class="line"><span class="meta">spring.http.encoding.force</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Connor</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.connorzj.github.io/2020/04/12/SpringBoot%E4%B9%8BJSON%E8%A7%A3%E6%9E%90/">http://www.connorzj.github.io/2020/04/12/SpringBoot%E4%B9%8BJSON%E8%A7%A3%E6%9E%90/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.connorzj.github.io">ConnorZJ's Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/spring-boot/">spring boot</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/04/13/SpringBoot%E4%B9%8B%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE/"><i class="fa fa-chevron-left">  </i><span>SpringBoot之静态资源访问（五）</span></a></div><div class="next-post pull-right"><a href="/2020/04/08/SpringBoot%E4%B9%8B%E6%95%B4%E5%90%88%E8%A7%86%E5%9B%BE%E5%B1%82/"><span>SpringBoot之整合视图层（三）</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(http://qiniuyun.zijie.fun/64535234_p0.png)"><div class="layout" id="footer"><div class="copyright">&copy;2020 By Connor</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>